# RoadMap: Цифровая трансформация банка "Стандарт"

## Горизонт планирования: 6 месяцев (MVP) + 1 год (целевое состояние)

---

## Стратегические цели

### MVP (6 месяцев):
- Клиенты могут подать заявку на депозит в интернет-банке и на сайте
- Бэк-офис обрабатывает заявки по улучшенному процессу
- Операторы кол-центров (внутреннего и партнёрского) консультируют по актуальным ставкам
- Ставки управляются централизованно (замена Excel)

### Целевое состояние (1 год):
- Полностью автоматическое открытие депозита без участия бэк-офиса
- Клиенты могут подать заявку на кредит онлайн с мгновенным решением
- Предодобренные кредитные предложения в интернет-банке
- Обработка кредитных заявок в течение рабочего дня

---

## Фаза 1: Подготовка инфраструктуры и базовых сервисов (Месяцы 1-2)

### Месяц 1

#### Недели 1-2: Инфраструктура
**Ответственные:** DevOps

**Задачи:**
- Развёртывание Kafka кластера (3 брокера)
- Развёртывание Redis кластера (Master + 2 Replica)
- Развёртывание PostgreSQL БД для микросервисов
- Настройка Nginx Load Balancer
- Развёртывание Prometheus + Grafana

**Результаты:**
- Готовая инфраструктура для микросервисов
- Мониторинг и метрики

#### Недели 3-4: Rate Management Service (базовая функциональность)
**Ответственные:** Команда внутренней разработки (Java)

**Задачи:**
- Создание микросервиса Rate Management Service
- Схема БД: deposit_rates, rate_history, export_logs
- CRUD API для управления ставками
- Веб-UI для бэк-офиса кредитов (ввод ставок)
- Интеграция с Redis (кэширование)

**Результаты:**
- Сотрудники могут централизованно управлять ставками (замена Excel)
- API готов для интеграции с другими системами

---

### Месяц 2

#### Недели 5-6: Rate Management Service (API и экспорт)
**Ответственные:** Команда внутренней разработки (Java)

**Задачи:**
- API Integration Module:
  - Public API: GET /api/v1/rates
  - API Key аутентификация
  - Webhook-уведомления
- File Export Module:
  - Генератор CSV-файлов
  - SFTP-клиент
  - Scheduler и retry-логика

**Результаты:**
- API готов для интеграции с кол-центрами и каналами
- Автоматическая передача ставок в партнёрский кол-центр

#### Недели 7-8: Deposit Application Service + API Gateway
**Ответственные:** Команда внутренней разработки (Java), DevOps

**Deposit Application Service:**
- Создание микросервиса
- Схема БД: deposit_applications, application_status_history
- REST API для создания и получения заявок
- Интеграция с Kafka (Producer и Consumer)
- Идемпотентность операций

**API Gateway:**
- Развёртывание Kong API Gateway
- Маршрутизация к микросервисам
- Плагины: Rate Limiting, JWT Auth, CORS, Logging
- SSL/TLS сертификаты

**Результаты:**
- Готовая система управления заявками
- Единая точка входа для всех каналов

**Milestone 1 (конец месяца 2):** Базовая платформа микросервисов готова, ставками можно управлять централизованно.

---

## Фаза 2: Интеграция каналов и АБС (Месяцы 3-4)

### Месяц 3

#### Недели 9-10: Интернет-банк (интеграция с Rate Management Service)
**Ответственные:** Подрядчик + внутренняя команда

**Задачи:**
- HTTP-клиент для API Rate Management Service
- Страница "Депозиты" в интернет-банке
- Отображение актуальных и персонализированных ставок
- Форма подачи заявки на депозит
- Интеграция СМС-подтверждения (существующий функционал)

**Результаты:**
- Клиенты видят актуальные ставки в интернет-банке
- Клиенты могут подать заявку на депозит

#### Недели 11-12: АБС (новые таблицы и интерфейсы)
**Ответственные:** Команда АБС

**Задачи:**
- Таблица deposit_applications_external
- PL-SQL процедуры для обработки заявок
- Интерфейс для бэк-офиса депозитов (Delphi)
- HTTP-клиент для получения ставок из Rate Management Service
- Отображение актуальных ставок в интерфейсе (замена Excel)

**Результаты:**
- Бэк-офис может обрабатывать онлайн-заявки в АБС
- Актуальные ставки доступны в АБС

---

### Месяц 4

#### Недели 13-14: АБС Integration Adapter
**Ответственные:** Команда АБС (Java-разработчики)

**Задачи:**
- Создание Java-приложения АБС Integration Adapter
- Kafka Consumer: чтение заявок из топика deposit-applications
- Запись заявок в deposit_applications_external (JDBC)
- Kafka Producer: публикация статусов в топик deposit-application-status
- Логирование и мониторинг

**Результаты:**
- Заявки из интернет-банка автоматически попадают в АБС
- Статусы обновляются асинхронно

#### Недели 15-16: Интернет-банк (статусы заявок)
**Ответственные:** Подрядчик + внутренняя команда

**Задачи:**
- HTTP-клиент для Deposit Application Service
- Отправка заявок через API Gateway
- Раздел "Мои заявки на депозиты"
- Polling/WebSocket для обновления статусов
- Unit и Integration тесты

**Результаты:**
- Клиенты видят статусы своих заявок в реальном времени

**Milestone 2 (конец месяца 4):** Интернет-банк интегрирован с платформой, заявки обрабатываются асинхронно через Kafka.

---

## Фаза 3: Сайт и кол-центры (Месяцы 5-6)

### Месяц 5

#### Недели 17-18: Сайт
**Ответственные:** Команда внутренней разработки (PHP + React)

**Задачи:**
- HTTP-клиент для API Rate Management Service
- Страница "Депозиты" на сайте
- Форма подачи заявки (ФИО, телефон)
- HTTP-клиент для Deposit Application Service
- Страница подтверждения заявки
- Unit и E2E тесты

**Результаты:**
- Новые клиенты могут подать заявку на депозит на сайте

#### Недели 19-20: Система кол-центра (интеграция с Rate Management Service)
**Ответственные:** Подрядчик + внутренняя команда

**Задачи:**
- Rates Integration Adapter (Spring Boot):
  - Webhook-receiver
  - HTTP-клиент для API
  - Сохранение ставок в БД системы кол-центра
  - Scheduled task (fallback)
- Страница "Депозиты" для операторов (React):
  - Таблица продуктов с ставками
  - Фильтры
  - Индикатор актуальности

**Результаты:**
- Операторы кол-центра видят актуальные ставки

---

### Месяц 6

#### Недели 21-22: Система кол-центра (интеграция с заявками)
**Ответственные:** Подрядчик + внутренняя команда

**Задачи:**
- Webhook-receiver для заявок с сайта
- Создание обращений в системе кол-центра
- HTTP-клиент для передачи заявок в Deposit Application Service
- Обучение операторов внутреннего кол-центра

**Результаты:**
- Операторы обрабатывают заявки с сайта

#### Недели 23-24: Тестирование и запуск MVP
**Ответственные:** QA + все команды

**Задачи:**
- End-to-end тестирование сценариев (интернет-банк, сайт)
- Тестирование интеграции Rate Management Service
- Нагрузочное тестирование (1000 заявок/час)
- User Acceptance Testing (UAT) с бизнесом
- Исправление критичных багов
- Обучение бэк-офиса депозитов и операторов партнёрского кол-центра
- Деплой в продакшен
- Мониторинг после запуска (24/7, первые 3 дня)

**Результаты:**
- Система запущена в продакшен
- Все ключевые стейкхолдеры обучены

**Milestone 3 (конец месяца 6): MVP ЗАПУЩЕН**
- Клиенты могут подать заявку на депозит в интернет-банке и на сайте
- Бэк-офис обрабатывает заявки в АБС
- Операторы кол-центров консультируют по актуальным ставкам

---

## Фаза 4: Автоматизация депозитов (Месяцы 7-9)

### Месяц 7

#### Автоматический расчёт персонализированных ставок
**Ответственные:** Команда внутренней разработки

**Задачи:**
- Сервис расчёта персонализированных ставок:
  - Интеграция с АБС (данные клиента, история)
  - Интеграция с бэк-офисом кредитов (уровень кредитного риска)
  - API: POST /api/v1/rates/calculate-personalized
- Интеграция с интернет-банком:
  - Вызов API при открытии страницы депозитов
  - Отображение персональных ставок

**Результаты:**
- Клиенты видят персональные ставки автоматически

#### Автоматическое одобрение депозитов
**Ответственные:** Команда АБС

**Задачи:**
- PL-SQL процедура auto_approve_deposit_application()
- Критерии автоодобрения:
  - Стандартная ставка (не VIP)
  - Достаточно средств на счёте
  - Сумма в пределах лимитов
- Автоматическое создание депозита
- СМС-уведомление клиенту

**Результаты:**
- Простые заявки одобряются автоматически без бэк-офиса

---

### Месяц 8

#### Полная автоматизация процесса депозита
**Ответственные:** Команда АБС, команда микросервисов

**Задачи:**
- Workflow автоматического открытия депозита:
  - Валидация заявки
  - Резервирование средств
  - Создание депозита
  - Обновление статуса
- Обработка edge cases:
  - Недостаточно средств → автоотклонение
  - VIP-клиент → эскалация в бэк-офис
- Dashboard для бэк-офиса (мониторинг автоодобрений)

**Результаты:**
- 80%+ заявок обрабатываются автоматически

#### Оптимизация производительности
**Ответственные:** Все команды разработки

**Задачи:**
- Оптимизация запросов к БД АБС
- Горизонтальное масштабирование микросервисов (до 6 инстансов)
- Кэширование справочных данных (Redis)
- Nагрузочное тестирование (5000 заявок/час)

**Результаты:**
- Отклик API < 200 мс (95 перцентиль)
- Система выдерживает пиковые нагрузки

---

### Месяц 9

#### Тестирование и запуск автоматизации
**Ответственные:** QA + все команды

**Задачи:**
- End-to-end тестирование автоматического открытия депозитов
- A/B тестирование (50% заявок → автоматика, 50% → бэк-офис)
- Мониторинг качества решений (% отмен, жалобы)
- Обучение бэк-офиса новому процессу (только VIP-клиенты)
- Деплой в продакшен
- Постепенное увеличение % автоматики (50% → 80% → 95%)

**Результаты:**
- Бэк-офис депозитов обрабатывает только сложные случаи

**Milestone 4 (конец месяца 9):** Депозиты открываются автоматически, операционные издержки снижены на 70%.

---

## Фаза 5: Онлайн-кредиты (Месяцы 10-12)

### Месяц 10

#### Credit Application Service
**Ответственные:** Команда внутренней разработки

**Задачи:**
- Создание микросервиса Credit Application Service (аналогично Deposit Application Service)
- Схема БД: credit_applications, scoring_results
- REST API для создания заявок на кредит
- Интеграция с системой скоринга (REST API)
- Интеграция с Кредитным конвейером (через БД, раз в день - пока MVP)

**Результаты:**
- Готова платформа для обработки кредитных заявок

#### Предварительный скоринг для предодобренных предложений
**Ответственные:** Команда скоринга

**Задачи:**
- Batch-процесс расчёта предодобренных предложений:
  - Ежедневный расчёт для всех клиентов (ночью)
  - Сохранение результатов в БД
- API для получения предодобренных предложений:
  - GET /api/v1/pre-approved-offers/{clientId}
- Интеграция с Credit Application Service

**Результаты:**
- Клиенты видят предодобренные предложения в интернет-банке

---

### Месяц 11

#### Интернет-банк: кредиты онлайн
**Ответственные:** Подрядчик + внутренняя команда

**Задачи:**
- Страница "Кредиты" в интернет-банке:
  - Отображение доступных кредитов с условиями
  - Отображение предодобренных предложений
- Форма подачи заявки на кредит:
  - Счёт зачисления, данные для заявки
  - СМС-подтверждение
- HTTP-клиент для Credit Application Service
- Раздел "Мои заявки на кредиты"
- Polling статусов заявок

**Результаты:**
- Клиенты могут подать заявку на кредит в интернет-банке

#### Сайт: кредиты для новых клиентов
**Ответственные:** Команда внутренней разработки (PHP + React)

**Задачи:**
- Страница "Кредиты" на сайте
- Форма подачи заявки (ФИО, телефон, опционально паспортные данные)
- Интеграция с БКИ (через систему скоринга):
  - Если паспортные данные указаны → мгновенное решение (онлайн скоринг через БКИ)
- Страница с результатом (одобрено/не одобрено)

**Результаты:**
- Новые клиенты могут подать заявку на кредит и получить мгновенное решение

---

### Месяц 12

#### Ускорение обработки кредитных заявок
**Ответственные:** Команда АБС, команда Кредитного конвейера

**Задачи:**
- Изменение интеграции АБС <-> Кредитный конвейер:
  - Вместо раз в день → в режиме реального времени (через Kafka или REST API)
- Приоритизация заявок в Кредитном конвейере:
  - Предодобренные заявки → высокий приоритет
  - Обработка в течение рабочего дня
- СМС-уведомления об изменении статуса кредитной заявки

**Результаты:**
- Заявки обрабатываются в течение рабочего дня (вместо недели)

#### Тестирование и запуск кредитов онлайн
**Ответственные:** QA + все команды

**Задачи:**
- End-to-end тестирование кредитных сценариев (интернет-банк, сайт)
- Нагрузочное тестирование (500 заявок/час)
- UAT с бизнесом
- Обучение бэк-офиса кредитов
- Деплой в продакшен

**Результаты:**
- Кредиты доступны онлайн с быстрым решением

**Milestone 5 (конец месяца 12): ЦЕЛЕВОЕ СОСТОЯНИЕ ДОСТИГНУТО**
- Депозиты открываются полностью автоматически
- Клиенты получают предодобренные кредитные предложения
- Заявки на кредит обрабатываются в течение рабочего дня
- Новые клиенты получают мгновенное решение по кредиту (через БКИ)

---

## Визуальная RoadMap (для draw.io)

### Структура диаграммы:

**Ось X (время):** 12 месяцев, разделённых на недели (48 недель)
**Ось Y (системы):**
1. Инфраструктура (DevOps)
2. Микросервисы (Rate Management, Deposit Application, Credit Application)
3. API Gateway
4. Интернет-банк
5. Сайт
6. АБС
7. Система кол-центра
8. Партнёрский кол-центр
9. Тестирование и запуск

**Элементы:**
- **Прямоугольники** - задачи с указанием недель
- **Стрелки** - зависимости между задачами
- **Вертикальные линии (Milestones)**:
  - M1 (конец месяца 2): Базовая платформа готова
  - M2 (конец месяца 4): Интернет-банк интегрирован
  - M3 (конец месяца 6): MVP запущен
  - M4 (конец месяца 9): Автоматизация депозитов
  - M5 (конец месяца 12): Целевое состояние
- **Цветовое кодирование:**
  - Синий: MVP (месяцы 1-6)
  - Зелёный: Автоматизация депозитов (месяцы 7-9)
  - Оранжевый: Кредиты онлайн (месяцы 10-12)

**Легенда:**
- Критический путь (толстые границы)
- Зависимости (стрелки)
- Параллельные работы (одновременные прямоугольники)

---

## Инструкция для draw.io:

1. Создать файл `RoadMap_MVP.drawio`
2. Использовать шаблон "Timeline" или "Gantt Chart"
3. Ось X: 12 месяцев, деления по неделям
4. Ось Y: 9 систем/направлений
5. Добавить прямоугольники для задач:
   - Заголовок задачи
   - Недели (например, "Недели 1-2")
6. Соединить стрелками зависимости
7. Добавить вертикальные линии Milestones (M1-M5)
8. Применить цветовое кодирование (синий, зелёный, оранжевый)
9. Добавить легенду внизу
10. Опционально: добавить секцию "Команды и ресурсы" справа с указанием количества людей

---

## Ключевые риски и митигации

### Риск 1: Задержки со стороны подрядчиков (интернет-банк, система кол-центра)
**Вероятность:** Средняя
**Влияние:** Высокое (может сдвинуть запуск MVP)
**Митигация:**
- Еженедельные статус-митинги с подрядчиками
- Early integration testing (начиная с недели 8)
- Буфер 2 недели в плане
- Контрактные штрафы за задержки

### Риск 2: Проблемы производительности при нагрузочном тестировании
**Вероятность:** Средняя
**Влияние:** Высокое (может потребовать переработки архитектуры)
**Митигация:**
- Начать нагрузочное тестирование рано (неделя 10)
- Профилирование и оптимизация на ранних этапах
- Горизонтальное масштабирование микросервисов
- План Б: временное ограничение нагрузки (rate limiting)

### Риск 3: SFTP-интеграция с партнёрским кол-центром задерживается
**Вероятность:** Средняя
**Влияние:** Среднее (не блокирует MVP, но блокирует подключение партнёра)
**Митигация:**
- Начать настройку SFTP как можно раньше (неделя 4)
- Ответственный со стороны партнёра назначен
- SLA на доступность SFTP-сервера
- План Б: временная email-рассылка файлов

### Риск 4: Команда АБС не справляется с объёмом задач
**Вероятность:** Средняя
**Влияние:** Высокое (АБС - критичная система, блокирует интеграции)
**Митигация:**
- Приоритизация задач АБС (критический путь)
- Привлечение дополнительных Java-разработчиков для АБС Integration Adapter
- Упрощение интерфейса для бэк-офиса (минимальные изменения в Delphi-клиенте)

### Риск 5: Бизнес меняет требования в процессе разработки
**Вероятность:** Высокая
**Влияние:** Среднее-Высокое (может добавить задачи, сдвинуть сроки)
**Митигация:**
- Фиксация требований после FURPS+ и ADR (change freeze)
- Change request процесс: все изменения оцениваются по срокам и бюджету
- Бэклог для следующих фаз (после MVP)
- Еженедельные демо стейкхолдерам (прозрачность прогресса)

---

## Метрики успеха RoadMap

### KPI по срокам:
- MVP запущен в срок (6 месяцев) - ДА/НЕТ
- Автоматизация депозитов запущена в срок (9 месяцев) - ДА/НЕТ
- Кредиты онлайн запущены в срок (12 месяцев) - ДА/НЕТ

### KPI по качеству:
- Количество критичных багов в продакшене после запуска < 5
- Downtime при запуске < 1 час
- Покрытие тестами всех систем > 70%

### Бизнес-KPI (после запуска MVP):
- Конверсия посещение → заявка > 5%
- Конверсия заявка → открытый депозит > 70%
- Снижение времени открытия депозита с 20-60 минут до < 5 минут
- Увеличение количества новых клиентов на 30%

### Бизнес-KPI (после автоматизации, 9 месяцев):
- Автоматическое одобрение > 80% заявок
- Снижение операционных издержек на 70%
- Время обработки заявки < 1 минуты

### Бизнес-KPI (после кредитов онлайн, 12 месяцев):
- Время обработки кредитной заявки < 1 рабочий день (вместо недели)
- Конверсия предодобренные предложения → заявка > 20%
- Увеличение объёма выдачи кредитов на 50%

---

## Бюджет (ориентировочно)

### Внутренние ресурсы:
- Разработка (Java, PHP, React): 15 человек × 12 месяцев = 180 человеко-месяцев
- АБС (Delphi, PL-SQL, Java): 7 человек × 12 месяцев = 84 человеко-месяца
- DevOps: 2 человека × 12 месяцев = 24 человеко-месяца
- QA: 3 человека × 12 месяцев = 36 человеко-месяцев
- **Итого внутренние:** 324 человеко-месяца

### Подрядчики:
- Интернет-банк: 5 человек × 8 месяцев = 40 человеко-месяцев
- Система кол-центра: 3 человека × 6 месяцев = 18 человеко-месяцев
- Кредитный конвейер (изменения): 2 человека × 2 месяца = 4 человеко-месяца
- **Итого подрядчики:** 62 человеко-месяца

### Инфраструктура:
- Kafka, Redis, PostgreSQL: серверы в ЦОД (внутренняя инфраструктура)
- Kong API Gateway: лицензия Open Source
- Prometheus, Grafana, ELK: Open Source
- **Дополнительные затраты:** Серверы, сетевое оборудование

### Обучение:
- Обучение команд (Kafka, микросервисы): 5 дней × 20 человек
- Обучение бизнес-пользователей: 2 дня × 150 операторов
- Обучение партнёрского кол-центра: 3 дня × 100 операторов

**Общий бюджет:** Зависит от ставок и стоимости инфраструктуры (детальная оценка - задача менеджера проекта).

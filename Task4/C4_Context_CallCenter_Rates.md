# C4 Context Diagram: Передача ставок в кол-центры

## Описание

Эта диаграмма расширяет контекст из Task 3, фокусируясь на потоках передачи ставок депозитов в кол-центры (внутренний и партнёрский).

---

## Дополнительные элементы (к Task 3)

### Люди:

#### **Оператор партнёрского кол-центра** [Person] (НОВЫЙ)
- **Описание:** Сотрудник внешнего партнёрского кол-центра
- **Взаимодействие:**
  - Консультирует клиентов по ставкам депозитов
  - Работает в системе партнёрского кол-центра
  - Просматривает файлы со ставками

### Системы:

#### **Партнёрский кол-центр (система)** [Software System] (НОВЫЙ)
- **Описание:** Внешняя система партнёрского кол-центра (100 операторов)
- **Ответственность:**
  - Приём звонков клиентов (при перегрузке основного кол-центра)
  - Консультирование по депозитам по скриптам
  - Импорт файлов со ставками через SFTP
  - Отображение актуальных ставок операторам
- **Связь:**
  - ← Rate Management Service (SFTP): "Получает файлы со ставками ежедневно"
  - ← Оператор партнёрского кол-центра: "Работает в системе"
- **Цвет:** Светло-оранжевый (внешняя система)

---

## Обновлённые связи

### Существующие системы - новые связи:

#### **Система кол-центра банка** [Software System]
**Новая связь:**
- **Система кол-центра ← Rate Management Service** [HTTPS/JSON API + Webhook]
  - "Получает актуальные ставки через API"
  - "Получает webhook-уведомления об обновлении ставок"

#### **Rate Management Service** (внутри "Системы онлайн депозитов")
**Новые связи:**
- **Rate Management Service → Система кол-центра** [HTTPS/JSON API]
  - "Предоставляет API для получения ставок"
  - "Отправляет webhook-уведомления"

- **Rate Management Service → Партнёрский кол-центр** [SFTP]
  - "Загружает файлы со ставками ежедневно через SFTP"

---

## Фокус диаграммы: Потоки ставок

### Поток 1: Ставки → Внутренний кол-центр (API + Webhook)
```
Сотрудник бэк-офиса кредитов
  → Rate Management Service (обновление ставок)
  → Webhook → Система кол-центра (уведомление)
  → Система кол-центра → Rate Management Service API (запрос ставок)
  → Оператор кол-центра видит ставки
```

### Поток 2: Ставки → Партнёрский кол-центр (SFTP + Файл)
```
Сотрудник бэк-офиса кредитов
  → Rate Management Service (обновление ставок)
  → Rate Management Service генерирует CSV-файл
  → SFTP → Партнёрский кол-центр (загрузка файла)
  → Партнёрский кол-центр импортирует файл
  → Оператор партнёрского кол-центра видит ставки
```

---

## Инструкция для визуализации:

1. Взять диаграмму контекста из Task 3
2. Добавить слева "Оператор партнёрского кол-центра" (Person, зелёный)
3. Добавить систему "Партнёрский кол-центр" (светло-оранжевый, внешняя)
4. Добавить стрелки:
   - Rate Management Service → Система кол-центра (API + Webhook)
   - Rate Management Service → Партнёрский кол-центр (SFTP, пунктирная стрелка)
5. Выделить цветом новые потоки (например, зелёным)
6. Добавить легенду: (НОВЫЙ) = новые элементы для задачи кол-центров
